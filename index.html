<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Microsite Theme</title>
  <style>
    .phone-height {
      min-height: calc(100vh - 50px);
    }
  </style>
</head>

<body>
  <div v-scope class="flex justify-center text-gray-900">
    <div
      class="max-w-[400px] w-full bg-white border border-gray-600 rounded-md mt-5 mb-2 relative flex flex-col justify-between">
      <button
        @click="toggleContent()"
        class="toggle-icon absolute absolute -top-4 -left-4 p-2 bg-white shadow-md rounded-full group">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
          class="group-hover:animate-spin w-5">
          <path fill-rule="evenodd"
            d="M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 0 1-.517.608 7.45 7.45 0 0 0-.478.198.798.798 0 0 1-.796-.064l-.453-.324a1.875 1.875 0 0 0-2.416.2l-.243.243a1.875 1.875 0 0 0-.2 2.416l.324.453a.798.798 0 0 1 .064.796 7.448 7.448 0 0 0-.198.478.798.798 0 0 1-.608.517l-.55.092a1.875 1.875 0 0 0-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 0 1-.064.796l-.324.453a1.875 1.875 0 0 0 .2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 0 1 .796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 0 1 .517-.608 7.52 7.52 0 0 0 .478-.198.798.798 0 0 1 .796.064l.453.324a1.875 1.875 0 0 0 2.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 0 1-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 0 0 1.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 0 1-.608-.517 7.507 7.507 0 0 0-.198-.478.798.798 0 0 1 .064-.796l.324-.453a1.875 1.875 0 0 0-.2-2.416l-.243-.243a1.875 1.875 0 0 0-2.416-.2l-.453.324a.798.798 0 0 1-.796.064 7.462 7.462 0 0 0-.478-.198.798.798 0 0 1-.517-.608l-.091-.55a1.875 1.875 0 0 0-1.85-1.566h-.344ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"
            clip-rule="evenodd" />
        </svg>
      </button>
      <button
        @click="copiedToClipboard()"
        :data-clipboard-text="JSON.stringify(theme)"
        class="toggle-icon absolute absolute -top-4 -right-4 p-2 bg-white shadow-md rounded-full group">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" 
          class="group-hover:animate-pulse w-5">
          <path fill-rule="evenodd" d="M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z" clip-rule="evenodd" />
          <path fill-rule="evenodd" d="M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375ZM6 12a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V12Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 15a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V15Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 18a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V18Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
        </svg>        
      </button>

      <div v-if="visibleContent == 'site'" class="site-wrapper phone-height flex flex-col justify-between">
        <div class="top-section">
          <div
            :style="{backgroundColor: theme.color.headerBg}"
            class="appbar p-4">
            <div class="flex justify-end">
              <button
                :class="'p-2 mb-2 text-sm bg-opacity-30 rounded-xl flex items-center gap-2 ' + riwayatBtnColorCls">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" />
                </svg>                
                <span>Riwayat</span>
              </button>
            </div>
            <div class="flex justify-between items-center mt-2 font-semibold">
              <div>
                <img style="height: 32px" 
                  :src="theme.image.headerLogo" alt="Merchant Logo" />
              </div>
              <div>
                <img style="height: 32px" 
                  class="pr-1"
                  :src="theme.color.headerTextColor === 'dark' ? logo.other.insightDark : logo.other.insightWhite" 
                  alt="Insight Inovasi" />
              </div>
            </div>
          </div>
          <div 
            :style="{backgroundColor: theme.color.headerBg, color: darkLightToColor(theme.color.headerTextColor)}"
            class="header px-4 py-3 font-bold text-lg">
            {{ theme.text.homepageTitle }}
          </div>
          <div class="bg-white px-3 pt-8 flex flex-col items-center">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-32 text-green-700">
              <path fill-rule="evenodd"
                d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z"
                clip-rule="evenodd" />
            </svg>

            <div class="text-xl font-semibold mb-5 mt-2">Transaksi Berhasil</div>

            <div class="border border-gray-400 text-sm w-full rounded-md px-3 py-3">
              <h3 class="font-semibold">Detail Transaksi</h3>
              <div class="space-y-3 my-3" v-for="(item, itemIdx) in detailTransaksi">
                <div :class="'flex justify-between ' + (item[2] == '-' ? 'border-b border-gray-400 pb-3' : null)"
                  :key="itemIdx">
                  <span>{{ item[0] }}</span>
                  <span>{{ item[1] }}</span>
                </div>
              </div>
              <div class="flex justify-between">
                <span>Total dibayar</span>
                <span 
                :style="{color: theme.color.secondary}"
                  class="font-semibold">Rp 22.500</span>
              </div>
            </div>
          </div>
        </div>
        <div class="bottom-section p-3">
          <button :style="{backgroundColor: theme.color.primary, color: darkLightToColor(theme.color.buttonTextColor)}"
            class="hover:opacity-80 font-semibold w-full px-4 py-3 text-center rounded-md">
            Done
          </button>
        </div>
      </div>
      <!-- END site-wrapper -->

      <div v-else class="form-wrapper phone-height flex flex-col justify-between">
        <div class="top-section">
          <div class="p-4 bg-black text-white text-xl">
            Configure Theme
          </div>
          <div class="space-y-2 p-4">
            <div class="field-wrapper flex flex-col gap-2">
              <label class="font-semibold" for="homepageTitleField">Header Title</label>
              <input 
                id="homepageTitleField" 
                type="text" 
                v-model="themeForm.homepageTitle"
                class="p-2 border border-gray-400 rounded-md" />
            </div>
            <div class="field-wrapper flex flex-col gap-2">
              <label class="font-semibold" for="headerLogoField">Header Logo URL</label>
              <textarea 
                id="headerLogoField" 
                type="text" 
                v-model="themeForm.headerLogo"
                class="p-2 border border-gray-400 rounded-md"></textarea>
              <div class="space-x-2 text-xs text-blue-600">
                <span>AUTOFILL: </span>
                <template v-for="merchantLogo in logoList">
                  <button 
                    :key="merchantLogo(0)"
                    class="underline" 
                    @click="autocompleteLogo(merchantLogo[1])">{{ merchantLogo[0] }}</button>
                </template>
              </div>
            </div>
            <template v-for="(formModel, formIdx) in colorPickerModels">
              <div class="field-wrapper flex flex-col gap-2" :key="formIdx">
                <label class="font-semibold" :for="formModel[1]">{{ formModel[0] }}</label>
                <input :id="formModel[1]" 
                  type="color" 
                  v-model="themeForm[formModel[1]]" 
                  class="cursor-pointer hover:border border-yellow-400"/>
              </div>
            </template>
            <template v-for="(formModel, formIdx) in colorDropdownModels">
              <div class="field-wrapper flex flex-col gap-2" :key="formIdx">
                <label class="font-semibold" :for="formModel[1]">{{ formModel[0] }}</label>
                <select :id="formModel[1]" 
                  v-model="themeForm[formModel[1]]" 
                  class="p-2 border border-gray-400 rounded-md cursor-pointer">
                  <option value="light">Light</option>
                  <option value="dark">Dark</option>
                </select>
              </div>
            </template>
          </div>
        </div>
        <div class="bottom-section p-3">
          <button
            @click="applyNewTheme()"
            class="text-white bg-black hover:opacity-80 font-semibold w-full px-4 py-3 text-center rounded-md">
            Apply Changes
          </button>
        </div>
      </div>
    </div>
    <!-- END form-wrapper -->
  </div>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>

  <script type="module">
    import { run } from './run.js';
    run()
  </script>
</body>

</html>